import { themes } from 'mdx-deck';

export const theme = {
  ...themes.dark,
  fonts: {
    body: 'Inter, sans-serif',
    monospace: 'monospace',
  },
  colors: {
    text: '#fff',
    background: '#000',
    primary: '#1fc4db',
    secondary: '#1fc4db',
  },
  styles: {
    a: {
      color: 'primary',
    },
  },
};

<Head>
  <title>Intro to NextJS</title>
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@truenorth_ok" />
  <meta name="twitter:title" content="Intro to NextJS" />
  <meta name="twitter:description" content="Project slides" />
  <meta name="twitter:image" content="https://truenorth.co/assets/images/socialmedia.png" />
</Head>

<Header>

<!-- COLORMONO -->

</Header>

<Footer>

<!-- colormono.com -->

</Footer>

# Intro to NextJS

---

##### TN TALK

# Intro to NextJS

> Mariano Rivas

---

# Agenda

<Steps>

- Why NextJS?
- Project Setup
- Pages and Content
- Head API
- Routing and Links
- Dynamic Routes
- SSR
- Performance
- Deployment

</Steps>

---

## Why NextJS?

<Steps>

- Framework on top of React
- More opinionated structure
- Support for SSR and SSG
- Nice and clean API (link, head, router, amp)
- Custom configuration (absolute importing, etc)
- and ...

</Steps>

---

### Developer experience

- Hot code reloading<br />
  _React Fast Resfresh -> Maintain the state of the app_
- Styling options<br />
  _SASS, LESS, CSS Modules, Styled-JSX, Tailwind_
- TypeScript support<br />
  _JS and TS support out of the box_
- Automatic code splitting<br />
  _cuts out all of the functions that you don't actually use in your build_

---

### CLI

- next build
- next dev
- next start
- next export

---

## Project Setup

`npx create-next-app my-project`

https://github.com/colormono/playground-nextjs-tailwindcss

---

## Pages and Content

A _page_ is a React Component exported from a `.js`, `.jsx`, `.ts`, or `.tsx` file in the `pages` directory.

Each page is associated with a route based on its file name.

---

### Pre-rendering

By default, Next.js **pre-renders** every page.

Generates HTML for each page in advance, instead of having it all done by client-side JS.

Pre-rendering can result in better performance and SEO.

---

### Static File Serving

Files inside `public` folder can then be referenced by your code starting from the base URL (`/`).

```js
import Image from 'next/image';

function Avatar() {
  return <Image src="/images/me.png" alt="me" width="64" height="64" />;
}

export default Avatar;
```

<Notes>

This folder is also useful for robots.txt, favicon.ico, Google Site Verification, and any other static files (including .html)!

</Notes>

---

## Head API

**next/head**

Append elements to the head of an HTML.

Add SEO support for every pages or content.

---

## Routing and Links

**next/router** and **next/link**

Link: handle client side route transitions.

Router: hook to access the router object inside any function component in your app.

---

## Dynamic Routes

**getStaticPaths**: Routes that aren't predefined.

Pages are generated on build time.

ie: `investments/[investment].js`

---

## Performance

Out of the box: **automatic code splitting** and **efficient code under the hood**

**reportWebVitals**: metrics to capture the user experience of a web page

---

### Web vitals included

- TTFB: Time to First Byte
- FCP: First Contentful Paint
- LCP: Largest Contentful Paint
- FID: First Input Delay
- CLS: Cumulative Layout Shift
- **Custom metrics**:
  - Next.js-hydration
  - Next.js-route-change-to-render
  - Next.js-render

---

### Sending results to analytics

```js
export function reportWebVitals(metric) {
  const body = JSON.stringify(metric);
  const url = 'https://example.com/analytics';

  // Use `navigator.sendBeacon()` if available, falling back to `fetch()`.
  if (navigator.sendBeacon) {
    navigator.sendBeacon(url, body);
  } else {
    fetch(url, { body, method: 'POST', keepalive: true });
  }
}
```

---

## Deployment

```
[build]
  command = "npm run build && npm run export"
  publish = "out"
```

- Netlify
- Vercel
- AWS Amplify

---

## Next Talk

- API Routes
  - Basic API Routes
  - API Routes with middleware
  - API Routes with GraphQL
  - API Routes with REST
  - API Routes with CORS
- Serverless functions
- Static Optimization
- Cache control
- Preview Mode
- Internationalized Routing
- Authentication

---

# Thanks
